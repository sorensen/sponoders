/*
 * HTML5 âœ° Boilerplate
 *
 * What follows is the result of much research on cross-browser styling.
 * Credit left inline and big thanks to Nicolas Gallagher, Jonathan Neal,
 * Kroc Camen, and the H5BP dev community and team.
 *
 * Detailed information about this CSS: h5bp.com/css
 *
 * ==|== normalize ==========================================================
 */

/* =============================================================================
 * HTML5 display definitions
 * ==========================================================================
 */

article, aside, details, figcaption, figure, footer, header, hgroup, nav, section
  display: block

audio, canvas, video
  display: inline-block
  *display: inline
  *zoom: 1

audio:not([controls]), [hidden]
  display: none

/* =============================================================================
 * Base
 * ==========================================================================
 */

/*
 * 1. Correct text resizing oddly in IE6/7 when body font-size is set using em units
 * 2. Force vertical scrollbar in non-IE
 * 3. Prevent iOS text size adjust on device orientation change, without disabling user zoom: h5bp.com/g
 */

html
  font-size: 100%
  overflow hidden
  //overflow-y: scroll
  -webkit-text-size-adjust: 100%
  -ms-text-size-adjust: 100%

body
  margin: 0
  font 13px/1.5 Helvetica Neue,Arial,Helvetica,'Liberation Sans',FreeSans,sans-serif
  color: #222

button, input, select, textarea
  font-family Helvetica Neue,Arial,Helvetica,'Liberation Sans',FreeSans,sans-serif
  color: #222

/*
 * Remove text-shadow in selection highlight: h5bp.com/i
 * These selection declarations have to be separate
 * Also: hot pink! (or customize the background color to match your design)
 */
::selection
  background: #fe57a1
  color: #fff
  text-shadow: none
::-moz-selection
  background: #fe57a1
  color: #fff
  text-shadow: none

/* =============================================================================
 * Links
 * ==========================================================================
 */
a
  color: #00e
  &:visited
    color: #551a8b
  &:hover
    color: #06e
  &:focus
    outline: thin dotted
  &:hover, &:active
    outline: 0

/* Improve readability when focused and hovered in all browsers: h5bp.com/h */

/* =============================================================================
 * Typography
 * ==========================================================================
 */
abbr[title]
  border-bottom: 1px dotted

b, strong
  font-weight: bold

blockquote
  margin: 1em 40px

dfn
  font-style: italic

hr
  display: block
  height: 1px
  border: 0
  border-top: 1px solid #ccc
  margin: 1em 0
  padding: 0

ins
  background: #ff9
  color: #000
  text-decoration: none

mark
  background: #ff0
  color: #000
  font-style: italic
  font-weight: bold

/* Redeclare monospace font family: h5bp.com/j */

pre, code, kbd, samp
  font-family: monospace, serif
  _font-family: 'courier new', monospace
  font-size: 1em

/* Improve readability of pre-formatted text in all browsers */

pre
  white-space: pre
  white-space: pre-wrap
  word-wrap: break-word

q
  quotes: none
  &:before, &:after
    content: ""
    content: none

small
  font-size: 85%

/* Position subscript and superscript content without affecting line-height: h5bp.com/k */

sub
  font-size: 75%
  line-height: 0
  position: relative
  vertical-align: baseline

sup
  font-size: 75%
  line-height: 0
  position: relative
  vertical-align: baseline
  top: -0.5em

sub
  bottom: -0.25em

/* =============================================================================
 * Lists
 * ==========================================================================
 */

ul, ol
  margin: 1em 0
  padding: 0 0 0 40px

dd
  margin: 0 0 0 40px

nav
  ul, ol
    list-style: none
    list-style-image: none
    margin: 0
    padding: 0

/* =============================================================================
 * Embedded content
 * ==========================================================================
 */

/*
 * 1. Improve image quality when scaled in IE7: h5bp.com/d
 * 2. Remove the gap between images and borders on image containers: h5bp.com/e
 */

img
  border: 0
  -ms-interpolation-mode: bicubic
  vertical-align: middle

/*
 * Correct overflow not hidden in IE9
 */
svg:not(:root)
  overflow: hidden

/* =============================================================================
 * Figures
 * ==========================================================================
 */

figure, form
  margin: 0

/* =============================================================================
 * Forms
 * ==========================================================================
 */

fieldset
  border: 0
  margin: 0
  padding: 0

/* Indicate that 'label' will shift focus to the associated form element */

label
  cursor: pointer

/*
 * 1. Correct color not inheriting in IE6/7/8/9
 * 2. Correct alignment displayed oddly in IE6/7
 */
legend
  border: 0
  *margin-left: -7px
  padding: 0

/*
 * 1. Correct font-size not inheriting in all browsers
 * 2. Remove margins in FF3/4 S5 Chrome
 * 3. Define consistent vertical alignment display in all browsers
 */

button, input, select, textarea
  font-size: 100%
  margin: 0
  vertical-align: baseline
  *vertical-align: middle

/*
 * 1. Define line-height as normal to match FF3/4 (set using !important in the UA stylesheet)
 * 2. Correct inner spacing displayed oddly in IE6/7
 */

button, input
  line-height: normal
  *overflow: visible

/*
 * Reintroduce inner spacing in 'table' to avoid overlap and whitespace issues in IE6/7
 */
table
  button, input
    *overflow: auto

/*
 * 1. Display hand cursor for clickable form elements
 * 2. Allow styling of clickable form elements in iOS
 */
button
  cursor: pointer
  -webkit-appearance: button

input
  &[type="button"], &[type="reset"], &[type="submit"]
    cursor: pointer
    -webkit-appearance: button
  &[type="checkbox"], &[type="radio"]
    box-sizing: border-box
    padding: 0
  &[type="search"]
    -webkit-appearance: textfield
    -moz-box-sizing: content-box
    -webkit-box-sizing: content-box
    box-sizing: content-box
    &::-webkit-search-decoration
      -webkit-appearance: none

/*
 * Consistent box sizing and appearance
 */
/*
 * Remove inner padding and border in FF3/4: h5bp.com/l
 */
button::-moz-focus-inner, input::-moz-focus-inner
  border: 0
  padding: 0

/*
 * 1. Remove default vertical scrollbar in IE6/7/8/9
 * 2. Allow only vertical resizing
 */
textarea
  overflow: auto
  vertical-align: top
  resize: vertical

/* Colors for form validity */

input:valid, textarea:valid

input:invalid, textarea:invalid
  background-color: #f0dddd

/* =============================================================================
 * Tables
 * ==========================================================================
 */
table
  border-collapse: collapse
  border-spacing: 0

td
  vertical-align: top

// TODO: move this to nib
// Mixins
no-bullet()
  list-style-image: none
  list-style-type: none
  margin-left: 0px

horizontal-list-item()
  no-bullet()
  white-space: nowrap
  float: left

/* =============================================================================
 * Color Variables
 * ==========================================================================
 */

bg_fill               = #dbdbdb

/*dk_gradient_top     = #cecece
dk_gradient_bottom    = #a6a6a6
dk_border             = #515151
dk_inset              = #e2e2e2*/

lt_gradient_top       = #e6e6e6
lt_gradient_bottom    = #b2b2b2
lt_border             = #808080
lt_inset              = #adadad

breadcrumb_fill       = #40404a

sidebar_normal_fill   = #444444
sidebar_over_fill     = #323232

button_top            = #4587be
button_bottom         = #33649a
button_inset          = #5ea1d8
button_border         = #1a1a1a
button_text_inset     = #1f3d59 // top
dark_button           = button_bottom - 10%

message_wrapper_fill  = #343434

message_fill          = #2f2f2f
message_border_bottom = #454545
message_inset_tlr     = #252525
message_inset_bottom  = #454545
message_p             = white
message_span          = #888888
message_text_inset    = #171717 // top


/* ==|== primary styles =====================================================
 * Author: sponoders
 * ==========================================================================
 */
@import 'nib'

h1, h2, h3, h4, h5, h6, ul, li
  margin 0
  padding 0
  color #2d2d2d

button, .button
  -reset()
  height 30px
  background: button_top
  background: linear-gradient(30px top, button_top, button_bottom)
  border: 1px solid #bbb
  border-radius(5px)
  box-shadow(inset 0 1px 0 0 button_inset)
  font-size: 14px
  font-weight: bold
  line-height: 1
  padding: 7px 15px 8px 15px
  text-align: center
  text-shadow 0 -1px 1px #444
  color: #fff
  &:hover, &.hover
    background: dark_button
    background: linear-gradient(30px top, button_top, dark_button)
    cursor: pointer
  &:active, &.active
    background: linear-gradient(30px top, button_bottom, button_top)
    box-shadow(inset 0 -1px 0 0 button_inset)
  &:focus, &.focus
    outline: none
    background: linear-gradient(30px top, button_bottom, button_top)
    box-shadow(0 0 5px 1px black)
a.button
  padding-top: 0
  padding-bottom: 0
  line-height 30px
  color white
#application
  absolute()
  top 0
  left 0
  bottom 0
  right 0
  background bg_fill
  .wrapper
    #header
      absolute()
      left 0
      right 0
      z-index 3
      height 32px
      border-bottom 1px solid lt_border
      box-shadow(inset 0 1px 0 lt_inset)
      background linear-gradient(32px top, lt_gradient_top, lt_gradient_bottom)
      ul, li
        height 32px
        line-height 32px
      ul
        margin-left 32px
        li
          font-size 12px
          horizontal-list-item()
          span
            display inline-block
            width: 22px
            height 32px
            background url('/img/separator.png') no-repeat
            background-position center
          a
            display inline-block
            color breadcrumb_fill
    #message_wrapper
      absolute()
      top 10px
      bottom 10px
      left: 10px
      right 10px
      z-index: 2
      border-radius(6px)
      background-color message_wrapper_fill
      #message
        absolute()
        top: 25%
        left: 0
        right: 0
        margin 0 auto
        width 700px
        height 60px
        background-color message_fill
        box-shadow(inset 0 1px 0 message_inset_tlr, inset 1px 1px 0 message_inset_tlr, inset 0 1px 1px message_inset_tlr, inset 0 -1px 0 message_inset_bottom)
        border-bottom 1px solid message_border_bottom
        border-radius(10px)
        .container
          float left
          width 400px
          p, span
            float left
          p, span
            line-height 1
            font-size 14px
            font-weight bold
            text-shadow(0 -1px 0 message_text_inset)
          p
            margin 0
            padding 0
            margin-top 15px
            color message_p
          span
            margin-top 6px
            display block
            color message_span
          p, span
            margin-left 15px
        button, a.button
          float left
          margin-top 15px
          width 200px
          margin-left 25px
    #footer
      absolute()
      bottom 0
      left 0
      right 0
      z-index 3
      height 32px
      overflow hidden
      border-top 1px solid lt_border
      box-shadow(inset 0 -1px 0 lt_inset)
      background linear-gradient(32px top, lt_gradient_top, lt_gradient_bottom)

      p
        margin 0
        border-right 1px solid #ddd
        padding 0
        line-height 32px
        font-size 12px
        color #333
        float left
      span
        margin 0 20px
    #sidebar
      absolute()
      top 32px
      left 0px
      width 80px
      bottom 0
      z-index 2
      border-right 1px solid #222222
      background sidebar_normal_fill
      box-shadow(inset 0 0 25px black)
      // http://www.iconfinder.com/search/3/?q=iconset%3Abrightmix
      ul#quicklaunch
        margin 0
        padding 0
        li, a
          height 80px
          width 80px
        li
          no-bullet()
          border-bottom: 1px solid #2e2e2e
          relative()
          &:hover
            background sidebar_over_fill
            box-shadow(inset 0 0 25px black)
            a
              opacity(0.5)
          &.selected
            background sidebar_over_fill
            box-shadow(inset 0 0 25px black)
            a
              opacity(1.0)
              &:before
                content: ""
                absolute()
                top 30.50px
                right -1px
                z-index 3
                width 10px
                height 19px
                margin 0
                padding 0
                background url('/img/selected.png') no-repeat
          a
            display block
            color white
            cursor pointer
            text-decoration none
            font-size 14px
            text-align center
            opacity(0.5)
            &#rooms:after, &#settings:after, &#credits:after, &#logout:after
              content: ""
              absolute()
              top: 12px
              left 0
              right 0
              margin 0 auto
              background transparent url('/img/sidebar/sprite.png') no-repeat
            &#rooms:after
              width 35px
              height 36px
              background-position 0px 0px
            &#settings:after
              width 35px
              height 35px
              background-position -35px 0px
            &#credits:after
              width 35px
              height 36px
              background-position -70px 0px
            &#logout:after
              width 36px
              height 36px
              background-position -105px 0px
            span
              display inline-block
              margin-top 50px
            &:hover
              opacity(1.0)
    #main-wrapper
      z-index 1
      color white
      absolute()
      top 33px
      left 81px
      right 0
      bottom 30px
      #main-content
        absolute()
        top 0
        left 0
        right 0
        bottom 0
        overflow-y auto
        background-color bg_fill
        room_darken = #e7e7e7 - 10%

        .room
          relative()
          margin 10px
          border: 1px solid #bababa
          box-shadow(inset 0 1px 0 #fcfcfc)
          height 60px
          border-radius(6px)
          margin-bottom: 0
          background linear-gradient(60px top, #f6f6f6, #e7e7e7)
          background-position: right center
          &:after
            content: ""
            absolute()
            top: 18px
            right 20px
            width 24px
            height 24px
            background transparent url('/img/next.png') no-repeat
            opacity(0.25)
          &:hover, &.hover
            background linear-gradient(60px top, #f6f6f6, room_darken)
            cursor: pointer
            &:after
              opacity(1.0)
          &:active, &.active
            box-shadow(inset 0 -1px 0 0 room_darken)
            background: linear-gradient(60px top, #e7e7e7, #f6f6f6)
          &:focus, &.focus
            outline: none
            background: linear-gradient(60px top, #e7e7e7, #f6f6f6)
          a
            absolute()
            left 0
            right 25%
            display block
            text-decoration none
            h3, p
              text-shadow(0 1px 1px white)
              line-height 20px
              font-size 13px
            h3
              margin-top 10px
              color #2d2d2d
              margin-left 20px
            p.description
              color #5d5d5d
              margin 0
              margin-left 20px
              padding 0
          div.statistics
            absolute()
            left 75%
            right 0
            color lighten(#2d2d2d, 15%)
            height 60px
            line-height 60px
            font-size 12px
        #user-track
          width 250px
          border-right: 1px solid gray
          .tracker
            width 250px
            background-color gray
            height 5px
          h1
            absolute(bottom 0px)
            z-index 2
            margin 0
            padding 0
            height 36px
            line-height 36px
            font-size 18px
            width 250px
            text-align center
            background-color black
.title
  h3
    font-size 18px
    line-height 38px
    height 38px
    margin-top 10px
    margin-left 10px

.dialog
  height 53px

.description
  height 73px

.dialog
  margin 10px
  margin-top 0
  border: 1px solid #bababa
  box-shadow(inset 0 1px 0 #fcfcfc)
  border-radius(6px)
  background linear-gradient(60px top, #f6f6f6, #e7e7e7)

  p, .controls
    relative()
    margin 10px

  .controls .submit
    margin-right 10px

  input, select, label, textarea
    font-size 13px
    display inline-block
    margin 0
    padding 0

  label
    margin-left 10px
    margin-top 12px
    width 120px
    height 28px
    line-height 28px
    color #2d2d2d
    font-weight bold

  input, select, textarea
    absolute()
    left 140px
    right 20px
    margin-top 12px
    padding 3px
    line-height 20px
    border 1px solid #aaaaaa
    border-radius(6px)
    box-sizing(content-box)
    background linear-gradient(26px top, #eeeeee, white)

  input, select
    height 20px

  textarea
    height 40px

.controls
  margin-left 10px
  .submit
    margin-right 10px

.extras
  absolute()
  left 420px
  top 50px
  bottom 10px
  right 10px

  .controls
    overflow hidden

    div
      float left

.track-wrapper
  absolute()
  overflow-y auto
  left 10px
  top 50px
  bottom 10px
  width 400px
  .track
    overflow hidden
    border 1px solid white
    .controls
      overflow hidden
      div
        display inline-block
        width 46px
        height 46px
        cursor pointer
        opacity(0.5)
        &:hover
          opacity(.75)
      // http://www.iconfinder.com/search/?q=iconset%3Aoxygen
      .play, .pause, .stop
        margin-right 10px
      .play, .pause, .stop, .mute
        background url('/img/player/sprite.png') no-repeat
      .play
        background-position: -92px 0px
      .pause
        background-position: -46px 0px
      .stop
        background-position: -138px 0px
      .mute
        background-position: 0px 0px
    .row
      overflow hidden
    .column
      width 40px
      height 40px
      padding 5px
      border-top 3px solid black
      border-bottom 3px solid black
      border-left 1px solid black
      border-right 1px solid black
      float left
      //background #eff2f5 url('/img/drop-area.png') no-repeat
      background linear-gradient(50px top, lighten(#DBDBDB, 10%), lighten(#DBDBDB, 25%))

.chat
  display none

  .message-form
    position absolute
    bottom 0
    left 0
    right 0
    height 40px
    border: 1px solid #bababa
    box-shadow(inset 0 1px 0 #fcfcfc)
    border-radius(6px)
    background linear-gradient(60px top, #f6f6f6, #e7e7e7)

    input
      absolute()
      left 10px
      right 10px
      top 5px
      padding 3px
      line-height 20px
      border 1px solid #aaaaaa
      border-radius(6px)
      box-sizing(content-box)
      background linear-gradient(26px top, #eeeeee, white)
      font-size 13px
      display inline-block
      margin 0
      padding 0
      height 27px

  .messages
    position absolute
    top 0
    bottom 40px
    left 0
    right 0
    overflow-y auto

    .message
      position relative
      margin 5px 3px
      border: 1px solid #bababa
      box-shadow(inset 0 1px 0 #fcfcfc)
      height auto
      border-radius(6px)
      background linear-gradient(60px top, #f6f6f6, #e7e7e7)
      background-position: right center
      list-style none outside
      padding 10px 15px
      border-top 1px solid #fff
      overflow hidden

      .small-avatar
        float left
        margin-top 3px
        width 30px
        height 30px
        overflow hidden
        display block
        margin 0 10px 0 0

      .small-avatar img
        height 30px
        width 30px

      .timeago
        float right
        padding 0 5px 0 10px

      .username
        padding 0 10px 0 0

.library, .chat
  left 0
  right 0
  bottom 0
  top 40px
  position absolute

.sound
  z-index 9
  list-style none outside
  display inline-block
  height 50px
  width 50px
  margin 5px
  padding 3px
  border: 1px solid #bababa
  box-shadow(inset 0 1px 0 #fcfcfc)
  border-radius(6px)
  background linear-gradient(60px top, #f6f6f6, #e7e7e7)
  background-position: right center
  border-top 1px solid #fff
  color black

.beat
  border 1px solid green
  position relative
  margin 0
  padding 3px
  border: 1px solid #bababa
  box-shadow(inset 0 1px 0 #fcfcfc)
  border-radius(6px)
  background linear-gradient(60px top, #f6f6f6, #e7e7e7)
  background-position: right center
  border-top 1px solid #fff
  color black
  width 34px
  height 34px

  .remove
    display block
    position absolute
    background white
    color red
    top 0
    right 0
    z-index 10
    height 5px
    width 5px

.main-room
  display block
  clear both
  overflow hidden
  .title, .room-description, .statistics
    absolute()
  .title
    top 0
    left 0
    right 75%
    height 48px
  .room-description
    top 10px
    left 25%
    right 25%
    height 38px
    border: 1px solid #bababa
    box-shadow(inset 0 1px 0 #fcfcfc)
    border-radius(6px)
    background linear-gradient(60px top, #f6f6f6, #e7e7e7)
    p
      margin 0
      padding 0
      line-height 38px
      color #2d2d2d
  .statistics
    left 75%
    right 0
.dialog-wrapper, #spinner, #overlay
  absolute()
  top 0
  left 0
  right 0
  bottom 0
  display none

#spinner
  background #c8c8c8
  opacity(0.8)
  z-index 1002

#inner-spinner
  background #5d5d5d
  color white
  float left
  width 160px
  height 160px
  border-radius(15px)
  margin-top -80px
  margin-left -80px
  absolute()
  top 50%
  left 50%
  opacity(0.9)

#vote
  position absolute
  top 4px
  right 0

#overlay
  background #666
  opacity(0.5)
  z-index 1001

#application.login .wrapper #main-wrapper
  left 20px
  right 20px

/* ==|== media queries ======================================================
 * PLACEHOLDER Media Queries for Responsive Design.
 * These override the primary ('mobile first') styles
 * Modify as content requires.
 * ==========================================================================
 */
@media only screen and (min-width: 480px)
  /* Style adjustments for viewports 480px and over go here */

@media only screen and (min-width: 768px)
  /* Style adjustments for viewports 768px and over go here */

/* ==|== non-semantic helper classes ========================================
 * Please define your styles before this section.
 * ==========================================================================
 */
/* For image replacement */

.ir
  display: block
  border: 0
  text-indent: -999em
  overflow: hidden
  background-color: transparent
  background-repeat: no-repeat
  text-align: left
  direction: ltr
  br
    display: none

/* Hide from both screenreaders and browsers: h5bp.com/u */

.hidden
  display: none !important
  visibility: hidden

/* Hide only visually, but have it available for screenreaders: h5bp.com/v */

.visuallyhidden
  border: 0
  clip: rect(0 0 0 0)
  height: 1px
  margin: -1px
  overflow: hidden
  padding: 0
  position: absolute
  width: 1px
  &.focusable
    &:active, &:focus
      clip: auto
      height: auto
      margin: 0
      overflow: visible
      position: static
      width: auto

/* Extends the .visuallyhidden class to allow the element to be focusable when navigated to via the keyboard: h5bp.com/p */

/* Hide visually and from screenreaders, but maintain layout */

.invisible
  visibility: hidden

/* Contain floats: h5bp.com/q */

.clearfix
  &:before
    content: ""
    display: table
  &:after
    content: ""
    display: table
    clear: both
  *zoom: 1

/* ==|== print styles =======================================================
 * Print styles.
 * Inlined to avoid required HTTP connection: h5bp.com/r
 * ==========================================================================
 */
@media print
  *
    background: transparent !important
    color: black !important
    text-shadow: none !important
    filter: none !important
    -ms-filter: none !important
  /* Black prints faster: h5bp.com/s */
  a
    text-decoration: underline
    &:visited
      text-decoration: underline
    &[href]:after
      content: " (" attr(href) ")"
  abbr[title]:after
    content: " (" attr(title) ")"
  .ir a:after
    content: ""
  a
    &[href^="javascript:"]:after, &[href^="#"]:after
      content: ""
  /* Don't show links for images, or javascript/internal links */
  pre, blockquote
    border: 1px solid #999
    page-break-inside: avoid
  thead
    display: table-header-group
  /* h5bp.com/t */
  tr
    page-break-inside: avoid
  img
    page-break-inside: avoid
    max-width: 100% !important
  @page
    margin: 0.5cm

  p, h2, h3
    orphans: 3
    widows: 3
  h2, h3
    page-break-after: avoid

